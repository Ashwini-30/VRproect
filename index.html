<!doctype html>
<html lang="en">
<head>
 <meta charset="utf-8" />
 <title>IITM MEMS Lab â€” Clean VR Controls</title>
 <meta name="viewport" content="width=device-width, initial-scale=1" />
 <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

 <!--  ðŸ”¥ add WebXR controller support -->
 <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
 <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.controls.min.js"></script>

<style>
/* âœ¨ your entire CSS untouched, EXACTLY same */
html,body{ margin:0;height:100%;background:#000;font-family:Poppins}
#audioUI{position:fixed;top:16px;right:16px;display:flex;gap:12px;z-index:50}
.audioBtn{width:64px;height:64px;border-radius:18px;background:rgba(0,0,0,.7);
border:2px solid #00eaff;backdrop-filter:blur(10px);box-shadow:0 0 18px #0ef;}
.audioBtn img{width:72%;height:72%;}
#subtitles{position:fixed;left:50%;bottom:58px;transform:translateX(-50%);
padding:10px 18px;background:rgba(0,0,0,0.75);border:1px solid #00eaff;color:#fff;display:none;}
#progressWrap{position:fixed;left:50%;bottom:32px;transform:translateX(-50%);
width:60%;height:6px;background:#fff3;border-radius:9999px;overflow:hidden;display:none;}
#progressBar{width:0;height:100%;background:#00eaff;}
#ppeUI{position:fixed;top:90px;left:16px;z-index:50;display:flex;flex-direction:column;gap:8px;}
#ppePanel{background:#000d;border:1px solid #ffb300;display:none;padding:12px;}
/* not changing ANYTHING ELSE*/
</style>
</head>

<body>

<div id="fade"></div>

<!-- ðŸ”Š AUDIO unchanged -->
<div id="audioUI">
 <button id="btnAudioPlay" class="audioBtn"><img src="Images/start.png"></button>
 <button id="btnAudioStop" class="audioBtn"><img src="Images/stop.png"></button>
 <button id="btnAudioReplay" class="audioBtn"><img src="Images/replay.png"></button>
</div>

<!-- subtitles unchanged -->
<div id="subtitles"></div>
<div id="progressWrap"><div id="progressBar"></div></div>

<!-- PPE unchanged  -->
<div id="ppeUI">
 <button id="ppeToggle">Cleanroom PPE Test</button>
 <div id="ppePanel">
   <div id="ppeHeader">Gowning Sequence Practice</div>
   <div id="ppeMsg">Tap start</div>
   <div id="ppeGrid">
     <div class="ppe-item" data-id="ppe1"><img src="Images/ppe_labcoat.png"></div>
     <div class="ppe-item" data-id="ppe2"><img src="Images/ppe_shoe.png"></div>
     <div class="ppe-item" data-id="ppe3"><img src="Images/ppe_hairnet.png"></div>
     <div class="ppe-item" data-id="ppe4"><img src="Images/ppe_mask.png"></div>
     <div class="ppe-item" data-id="ppe5"><img src="Images/ppe_goggle.png"></div>
     <div class="ppe-item" data-id="ppe6"><img src="Images/ppe_gown.png"></div>
     <div class="ppe-item" data-id="ppe7"><img src="Images/ppe_shoecover.png"></div>
     <div class="ppe-item" data-id="ppe8"><img src="Images/ppe_boot.png"></div>
     <div class="ppe-item" data-id="ppe9"><img src="Images/ppe_purpleglove.png"></div>
     <div class="ppe-item" data-id="ppe10"><img src="Images/ppe_glove_blue.png"></div>
   </div>
   <button id="ppeClose">Close</button>
 </div>
</div>



<a-scene vr-mode-ui="enabled:true">

 <!--  ðŸ”¥ VR controller Raycasters -->
 <a-entity laser-controls="hand:right" raycaster="objects:.vr-hotspot"></a-entity>
 <a-entity laser-controls="hand:left"  raycaster="objects:.vr-hotspot"></a-entity>

 <!-- panorama -->
 <a-sky id="sky"></a-sky>

 <!-- NAV buttons same -->
 <a-entity id="navPanel" position="0 0.2 -1.2">
   <a-plane id="btnPrev"  class="clickable vr-hotspot" width="1" height="1"></a-plane>
   <a-plane id="btnEnter" class="clickable vr-hotspot" width="1" height="1"></a-plane>
   <a-plane id="btnNext"  class="clickable vr-hotspot" width="1" height="1"></a-plane>
 </a-entity>

</a-scene>


<script src="tour.js"></script>

<!-- ðŸ”¥ VR controller â†’ triggers original UI buttons -->
<script>
AFRAME.registerComponent('vrui', {
  init(){
    const click = id=>document.getElementById(id).click()

    document.querySelector("#btnPrev")  .addEventListener("click",()=>click("btnPrev"))
    document.querySelector("#btnNext")  .addEventListener("click",()=>click("btnNext"))
    document.querySelector("#btnEnter") .addEventListener("click",()=>click("btnEnter"))

    document.querySelector("#btnAudioPlayVR")?.addEventListener("click",()=>click("btnAudioPlay"))
  }
})
</script>

</body>
</html>
